-- DROP DIRECTORY backup;

-- CREATE directory backup as '/bbdd/practica/backup/datadump';

CREATE TABLESPACE FUTBOLTBS 
    DATAFILE '/bbdd/practica/tablespaces/backup/FUTBOLDTF.tbs' SIZE 500M 
        AUTOEXTEND ON NEXT 500M MAXSIZE 1000M;

CREATE TABLESPACE EQUIPOSTBS 
    DATAFILE '/bbdd/practica/tablespaces/backup/EQUIPOSDTF.tbs' SIZE 500M 
        AUTOEXTEND ON NEXT 500M MAXSIZE 1000M;

CREATE TABLESPACE JORNADASTBS 
    DATAFILE '/bbdd/practica/tablespaces/backup/JORNADASDTF.tbs' SIZE 500M 
        AUTOEXTEND ON NEXT 500M MAXSIZE 1000M;

SELECT TABLESPACE_NAME NAME, FILE_NAME LOCATION_FILE,FILE_ID ID,BLOCKS, STATUS,(BYTES/1024)/1024 "TAMANIO MB", (MAXBYTES/1024)/1024 "MAX_SIZE MB" FROM DBA_DATA_FILES;

-- DROP TABLESPACE FUTBOLTBS INCLUDING CONTENTS AND DATAFILES;
-- DROP TABLESPACE JORNADASTBS INCLUDING CONTENTS AND DATAFILES;
-- DROP TABLESPACE EQUIPOSTBS INCLUDING CONTENTS AND DATAFILES;
--------------------------------------------------------------- CREATION SCHEMA ---------------------------------------------------------------
CREATE USER FUTBOL IDENTIFIED BY futbol 
DEFAULT TABLESPACE FUTBOLTBS
TEMPORARY TABLESPACE TEMP
QUOTA UNLIMITED ON FUTBOLTBS;

CREATE USER EQUIPOS IDENTIFIED BY equipos 
DEFAULT TABLESPACE EQUIPOSTBS
TEMPORARY TABLESPACE TEMP
QUOTA UNLIMITED ON EQUIPOSTBS;


CREATE USER JORNADAS IDENTIFIED BY jornadas 
DEFAULT TABLESPACE JORNADASTBS
TEMPORARY TABLESPACE TEMP
QUOTA UNLIMITED ON JORNADASTBS;


grant read, write on directory backup to futbol;
grant imp_full_database,exp_full_database to futbol;
grant connect, resource to futbol;
SELECT USERNAME, USER_ID, ACCOUNT_STATUS, DEFAULT_TABLESPACE, DEFAULT_COLLATION FROM DBA_USERS WHERE USERNAME = 'FUTBOL';

-- DROP USER FUTBOL CASCADE;
-- DROP USER EQUIPOS CASCADE;
-- DROP USER JORNADAS CASCADE;

expdp futbol/futbol parfile=futbol_equipos.par
expdp futbol/futbol parfile=futbol_jornadas.par
impdp futbol/futbol parfile=jornadas.par 
impdp futbol/futbol parfile=equipos.par


SELECT USERNAME, USER_ID, ACCOUNT_STATUS STATUS, DEFAULT_TABLESPACE, CREATED, EXPIRY_DATE FROM DBA_USERS WHERE USERNAME IN ('FUTBOL','JORNADAS', 'EQUIPOS');